<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>上传</title>
    <script th:src="@{/js/jquery-3.3.1.min.js}"></script>
</head>
<body>
<form action="##" method="post" enctype="multipart/form-data" id="form1">
    <input type="file" name="file"><br/>
</form>
<input type="button" value="上传" id="button">
<!--<div>提示：单个文件上传大小不得超过100M</div>-->
</body>

<script>
    console.log('111');
    $("#button").click(
        function f() {
            var formData = new FormData($("#form1")[0]);

            $.ajax({
                url: "/file/upload",
                type: "POST",
                async: false,
                data: formData,
                processData : false, // 使数据不做处理
                contentType : false, // 不要设置Content-Type请求头

                cache: false,
                success: function (result) {
                    var imgUrl = result.model.filePath;
                    console.log(imgUrl);

                    if (imgUrl!=null){
                        location.href="/multi/download";
                        alert("上传成功");
                    }
                    else {
                        alert("文件格式不正确");
                    }
                },
                error: function () {
                    alert("数据没有成功返回！")
                }
            });

        }
    );
</script>

</html>